Cubique=function(a){var b=this;$.extend(b,a);b.c=0;b.cp=1;b.sv={};try{b.islsa="localStorage" in window&&window.localStorage!==null}catch(m){b.islsa=false}var k=[10,25,50,100],g=parseInt(b.gs("rop")),h=parseInt(b.gs("cp")),i=b.gs("sc"),f=b.gs("so"),c=$.parseJSON(b.gs("sr"));k.push(b.rop);k.sort(function(j,e){return j-e});k.join();b.s=(i&&f)?(i+" "+f):"";if(g&&$.inArray(g,k)!=-1){b.rop=g;if(h){b.cp=h}}else{b.ss("rop",b.rop);b.ss("cp",b.cp)}b.sr=c?c:{};b.ppo={};for(var d in k){b.ppo[k[d]]=k[d]}b.r();b.sd()};Cubique.prototype.r=function Cubique_r(){var n='<table class="cubique"><thead><tr>',d=this,o="",p=d.gs("sc"),g=d.gs("so");for(var m in d.co){if(typeof(d.coso[m])!="undefined"){o='<span class="order">'+((p==d.coso[m])?(g=="ASC"?"&#9660":"&#9650"):"")+'</span> <a href="#" title="Sort by '+d.co[m]+'" class="sort-by" data-column="'+m+'" data-order="'+((p==d.coso[m])?(g=="ASC"?"DESC":"ASC"):"ASC")+'">'+d.co[m]+"</a>"}else{o=d.co[m]}n+="<th>"+o+"</th>"}n+="</tr>";if(d.gos(d.cosr)){n+="<tr>";var b="",r=["LIKE","NOT LIKE","=","<>","<",">","<=",">="];for(var f in this.co){o="";if(typeof(d.cosr[f])!="undefined"){b=(typeof(d.sr[f])!="undefined")?d.sr[f][1]:"";o+='<select class="search-type" title="Search type">';for(var e in r){o+='<option value="'+r[e]+'"'+(b==""+r[e]+""?" selected=selected":"")+">"+r[e]+"</option>"}o+='</select><input type="text" data-column="'+f+'" placeholder="search" value="'+((typeof(d.sr[f])!="undefined")?d.sr[f][0]:"")+'"/> <a href="#" class="reset-search" title="Reset search">&times;</a>';d.sv[f]=(typeof(d.sr[f])!="undefined")?d.sr[f]:""}n+="<th>"+o+"</th>"}n+="</tr>"}n+="</thead><tbody></tbody></table>";$("#cubique-"+d.n).html(n);var a="ASC",q="",c=$("#cubique-"+d.n+" a.sort-by");c.click(function(){c.prev("span").html("");a=$(this).attr("data-order");q=$(this).attr("data-column");d.cp=1;d.s=q+" "+a;d.ss("cp",1);d.ss("sc",q);d.ss("so",a);$(this).attr("data-order",a=="ASC"?"DESC":"ASC");$(this).prev("span").html(a=="ASC"?"&#9660;":"&#9650;");d.sd();return false});$("#cubique-"+d.n+" input").keyup(function(){d.makeSearch($(this),$(this).prev("select"));return false});$("#cubique-"+d.n+" .search-type").change(function(){d.makeSearch($(this).next("input"),$(this));return false});$("#cubique-"+d.n+" .reset-search").click(function(){var j=$(this).prev(),h=j.prev();j.val(null);h.val("LIKE");d.makeSearch(j,h);return false});d.tbody=$("#cubique-"+d.n+" tbody");d.thead=$("#cubique-"+d.n+" thead")};Cubique.prototype.sd=function Cubique_sd(){var b=this,f=b.gos(b.co),e=$('<tr><td colspan="'+f+'" class="loading">.</td></tr>'),a=setInterval(function(){$(".loading").html($(".loading").html()+".")},50),c=new Date();this.tbody.html(e);$.ajax({type:"post",data:b.gpd(),url:(b.url?b.url:location.href)+"?nocache="+c.getTime(),dataType:"json",success:function(l){if(l.error){b.tbody.html('<tr><td colspan="'+f+'" class="error">'+b.em+"</td></tr>")}else{b.c=l.count;var k="";for(var g in l.data){k+="<tr>";for(var d in l.data[g]){if(null==l.data[g][d]){l.data[g][d]=""}k+="<td>"+l.data[g][d]+"</td>"}k+="</tr>"}b.tbody.html(k);$("table.cubique tbody td").mouseover(function(){$(this).parent().addClass("hovered")}).mouseleave(function(){$(this).parent().removeClass("hovered")});b.thead.find(".pages").remove();b.rps()}clearInterval(a);e.remove()}})};Cubique.prototype.rps=function Cubique_rps(){var f="",g=Math.ceil(this.c/this.rop),h=g,k=1,c=this,a='<span class="more">...</span>';if(g>10){if(c.cp<=6){k=1;h=10}else{if(g-c.cp<=5){k=g-11;h=g;f+=c.gtp(1,false)+a}else{k=c.cp-5;h=(c.cp+5<=g)?c.cp+5:g;f+=c.gtp(1,false);if(c.cp>7){f+=a}}}}for(var e=k;e<=h;e++){f+=c.gtp(e,e==c.cp)}if(g>h){if(g-c.cp>=7){f+=a}f+=this.gtp(g,false)}var b='<select class="per-page" title="Rows on page">';for(var d in c.ppo){b+='<option value="'+c.ppo[d]+'">'+c.ppo[d]+"</option>"}b+="</select>";c.thead.append($('<tr class="pages"><th colspan="'+c.gos(c.co)+'">'+f+'<a href="#" class="csv" title="Export to CSV">csv</a><a href="#" class="refresh" title="Refresh page">refresh</a>'+b+'<span class="in-total">'+c.c+" in total</span></th></tr>"));c.thead.find(".go-to-page").click(function(){c.cp=parseInt($(this).attr("data-number"));c.ss("cp",c.cp);c.sd();return false});c.thead.find(".per-page").change(function(){c.rop=$(this).val();c.ss("rop",c.rop);c.ss("cp",1);c.cp=1;c.sd();return false}).val(this.rop);c.thead.find(".refresh").click(function(){c.sd();return false});c.thead.find(".csv").click(function(){var i=c.str(c.gpd());document.location.href=(c.url?c.url:location.href)+"?cubique_data="+encodeURIComponent(i);return false})};Cubique.prototype.gtp=function Cubique_gtp(a,b){return'<a href="#" title="Go to page '+a+'" class="go-to-page'+(b?" curr":"")+'" data-number="'+a+'">'+a+"</a>"};Cubique.prototype.gos=function Cubique_gos(c){var b=0;for(var a in c){if(c.hasOwnProperty(a)){b++}}return b};Cubique.prototype.makeSearch=function Cubique_makeSearch(b,c){var e=b.attr("data-column"),d=[b.val(),c.val()],a=this;if(a.sv[e]!=d){a.sr[e]=d;a.ss("cp",1);a.ss("sr",a.str(a.sr));a.sv[e]=d;a.cp=1;a.sd()}};Cubique.prototype.str=function Cubique_str(e){if("JSON" in window){return JSON.stringify(e)}var d=typeof(e);if(d!="object"||e===null){if(d=="string"){e='"'+e+'"'}return String(e)}else{var f,b,c=[],a=(e&&e.constructor==Array);for(f in e){b=e[f];d=typeof(b);if(e.hasOwnProperty(f)){if(d=="string"){b='"'+b+'"'}else{if(d=="object"&&b!==null){b=this.stringify(b)}}c.push((a?"":'"'+f+'":')+String(b))}}return(a?"[":"{")+String(c)+(a?"]":"}")}};Cubique.prototype.gs=function Cubique_gs(d){var a=this,d=a.n+"_"+d;if(a.islsa){return localStorage.getItem(d)}else{var i=" "+document.cookie,f=" "+d+"=",b="",h=0,g=0;if(i.length>0){h=i.indexOf(f);if(h!=-1){h+=f.length;g=i.indexOf(";",h);if(g==-1){g=i.length}b=i.substring(h,g)}}return(b)}};Cubique.prototype.ss=function Cubique_ss(c,b){var d=new Date(),e=d,a=this;c=a.n+"_"+c;if(a.islsa){localStorage.setItem(c,b)}else{e.setTime(d.getTime()+864000000);document.cookie=c+"="+b+";expires="+expire.toGMTString()+";path=/"}};Cubique.prototype.gpd=function Cubique_gpd(){var a=this;return{cubique:{cp:a.cp,so:a.s,sr:a.sr,rop:a.rop}}};